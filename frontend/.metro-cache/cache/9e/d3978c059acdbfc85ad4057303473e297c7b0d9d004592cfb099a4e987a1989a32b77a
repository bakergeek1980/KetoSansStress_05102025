{"dependencies":[{"name":"../../skia/core/AnimatedImage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"LhU/Px6ZGN7Mh77TF9+qamLywNY=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":36,"index":102}}],"key":"9/hMKtQD5ZrdSt9i8tblq1v6X3Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAnimatedImageValue\", {\n    enumerable: true,\n    get: function () {\n      return useAnimatedImageValue;\n    }\n  });\n  var _skiaCoreAnimatedImage = require(_dependencyMap[0], \"../../skia/core/AnimatedImage\");\n  var _ReanimatedProxy = require(_dependencyMap[1], \"./ReanimatedProxy\");\n  var Rea = _interopDefault(_ReanimatedProxy);\n  const DEFAULT_FRAME_DURATION = 60;\n  const _worklet_8279287978886_init_data = {\n    code: \"function shopify_useAnimatedImageValueJs1(frameInfo){const{animatedImage,currentFrame,isPaused,lastTimestamp,frameDuration}=this.__closure;if(!animatedImage){currentFrame.value=null;return;}if(isPaused.value&&lastTimestamp.value!==-1){return;}const{timestamp:timestamp}=frameInfo;const elapsed=timestamp-lastTimestamp.value;if(elapsed<frameDuration){return;}animatedImage.decodeNextFrame();const oldFrame=currentFrame.value;currentFrame.value=animatedImage.getCurrentFrame();if(oldFrame){oldFrame.dispose();}lastTimestamp.value=timestamp;}\",\n    location: \"/app/frontend/node_modules/@shopify/react-native-skia/lib/module/external/reanimated/useAnimatedImageValue.js\",\n    sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"shopify_useAnimatedImageValueJs1\\\",\\\"frameInfo\\\",\\\"animatedImage\\\",\\\"currentFrame\\\",\\\"isPaused\\\",\\\"lastTimestamp\\\",\\\"frameDuration\\\",\\\"__closure\\\",\\\"value\\\",\\\"timestamp\\\",\\\"elapsed\\\",\\\"decodeNextFrame\\\",\\\"oldFrame\\\",\\\"getCurrentFrame\\\",\\\"dispose\\\"],\\\"sources\\\":[\\\"/app/frontend/node_modules/@shopify/react-native-skia/lib/module/external/reanimated/useAnimatedImageValue.js\\\"],\\\"mappings\\\":\\\"AAauB,SAAAA,gCAAaA,CAAAC,SAAA,QAAAC,aAAA,CAAAC,YAAA,CAAAC,QAAA,CAAAC,aAAA,CAAAC,aAAA,OAAAC,SAAA,CAChC,GAAI,CAACL,aAAa,CAAE,CAClBC,YAAY,CAACK,KAAK,CAAG,IAAI,CACzB,OACF,CACA,GAAIJ,QAAQ,CAACI,KAAK,EAAIH,aAAa,CAACG,KAAK,GAAK,CAAC,CAAC,CAAE,CAChD,OACF,CACA,KAAM,CACJC,SAAA,CAAAA,SACF,CAAC,CAAGR,SAAS,CACb,KAAM,CAAAS,OAAO,CAAGD,SAAS,CAAGJ,aAAa,CAACG,KAAK,CAG/C,GAAIE,OAAO,CAAGJ,aAAa,CAAE,CAC3B,OACF,CAGAJ,aAAa,CAACS,eAAe,CAAC,CAAC,CAC/B,KAAM,CAAAC,QAAQ,CAAGT,YAAY,CAACK,KAAK,CACnCL,YAAY,CAACK,KAAK,CAAGN,aAAa,CAACW,eAAe,CAAC,CAAC,CACpD,GAAID,QAAQ,CAAE,CACZA,QAAQ,CAACE,OAAO,CAAC,CAAC,CACpB,CAGAT,aAAa,CAACG,KAAK,CAAGC,SAAS,CACjC\\\",\\\"ignoreList\\\":[]}\"\n  };\n  const useAnimatedImageValue = (source, paused) => {\n    const defaultPaused = Rea.default.useSharedValue(false);\n    const isPaused = paused !== null && paused !== void 0 ? paused : defaultPaused;\n    const currentFrame = Rea.default.useSharedValue(null);\n    const lastTimestamp = Rea.default.useSharedValue(-1);\n    const animatedImage = (0, _skiaCoreAnimatedImage.useAnimatedImage)(source, err => {\n      console.error(err);\n      throw new Error(`Could not load animated image - got '${err.message}'`);\n    });\n    const frameDuration = (animatedImage === null || animatedImage === void 0 ? void 0 : animatedImage.currentFrameDuration()) || DEFAULT_FRAME_DURATION;\n    Rea.default.useFrameCallback(function shopify_useAnimatedImageValueJs1Factory({\n      _worklet_8279287978886_init_data,\n      animatedImage,\n      currentFrame,\n      isPaused,\n      lastTimestamp,\n      frameDuration\n    }) {\n      const _e = [new global.Error(), -6, -27];\n      const shopify_useAnimatedImageValueJs1 = function (frameInfo) {\n        if (!animatedImage) {\n          currentFrame.value = null;\n          return;\n        }\n        if (isPaused.value && lastTimestamp.value !== -1) {\n          return;\n        }\n        const {\n          timestamp\n        } = frameInfo;\n        const elapsed = timestamp - lastTimestamp.value;\n\n        // Check if it's time to switch frames based on GIF frame duration\n        if (elapsed < frameDuration) {\n          return;\n        }\n\n        // Update the current frame\n        animatedImage.decodeNextFrame();\n        const oldFrame = currentFrame.value;\n        currentFrame.value = animatedImage.getCurrentFrame();\n        if (oldFrame) {\n          oldFrame.dispose();\n        }\n\n        // Update the last timestamp\n        lastTimestamp.value = timestamp;\n      };\n      shopify_useAnimatedImageValueJs1.__closure = {\n        animatedImage,\n        currentFrame,\n        isPaused,\n        lastTimestamp,\n        frameDuration\n      };\n      shopify_useAnimatedImageValueJs1.__workletHash = 8279287978886;\n      shopify_useAnimatedImageValueJs1.__pluginVersion = \"0.6.0\";\n      shopify_useAnimatedImageValueJs1.__initData = _worklet_8279287978886_init_data;\n      shopify_useAnimatedImageValueJs1.__stackDetails = _e;\n      return shopify_useAnimatedImageValueJs1;\n    }({\n      _worklet_8279287978886_init_data,\n      animatedImage,\n      currentFrame,\n      isPaused,\n      lastTimestamp,\n      frameDuration\n    }));\n    return currentFrame;\n  };\n});","lineCount":97,"map":[[12,2,4,0,"Object"],[12,8,4,0],[12,9,4,0,"defineProperty"],[12,23,4,0],[12,24,4,0,"exports"],[12,31,4,0],[13,4,4,0,"enumerable"],[13,14,4,0],[14,4,4,0,"get"],[14,7,4,0],[14,18,4,0,"get"],[14,19,4,0],[15,6,4,0],[15,13,4,0,"useAnimatedImageValue"],[15,34,4,0],[16,4,4,0],[17,2,4,0],[18,2,1,0],[18,6,1,0,"_skiaCoreAnimatedImage"],[18,28,1,0],[18,31,1,0,"require"],[18,38,1,0],[18,39,1,0,"_dependencyMap"],[18,53,1,0],[19,2,2,0],[19,6,2,0,"_ReanimatedProxy"],[19,22,2,0],[19,25,2,0,"require"],[19,32,2,0],[19,33,2,0,"_dependencyMap"],[19,47,2,0],[20,2,2,0],[20,6,2,0,"Rea"],[20,9,2,0],[20,12,2,0,"_interopDefault"],[20,27,2,0],[20,28,2,0,"_ReanimatedProxy"],[20,44,2,0],[21,2,3,0],[21,8,3,6,"DEFAULT_FRAME_DURATION"],[21,30,3,28],[21,33,3,31],[21,35,3,33],[22,2,3,34],[22,8,3,34,"_worklet_8279287978886_init_data"],[22,40,3,34],[23,4,3,34,"code"],[23,8,3,34],[24,4,3,34,"location"],[24,12,3,34],[25,4,3,34,"sourceMap"],[25,13,3,34],[26,2,3,34],[27,2,4,7],[27,8,4,13,"useAnimatedImageValue"],[27,29,4,34],[27,32,4,37,"useAnimatedImageValue"],[27,33,4,38,"source"],[27,39,4,44],[27,41,4,46,"paused"],[27,47,4,52],[27,52,4,57],[28,4,5,2],[28,10,5,8,"defaultPaused"],[28,23,5,21],[28,26,5,24,"Rea"],[28,29,5,27],[28,30,5,27,"default"],[28,37,5,27],[28,38,5,28,"useSharedValue"],[28,52,5,42],[28,53,5,43],[28,58,5,48],[28,59,5,49],[29,4,6,2],[29,10,6,8,"isPaused"],[29,18,6,16],[29,21,6,19,"paused"],[29,27,6,25],[29,32,6,30],[29,36,6,34],[29,40,6,38,"paused"],[29,46,6,44],[29,51,6,49],[29,56,6,54],[29,57,6,55],[29,60,6,58,"paused"],[29,66,6,64],[29,69,6,67,"defaultPaused"],[29,82,6,80],[30,4,7,2],[30,10,7,8,"currentFrame"],[30,22,7,20],[30,25,7,23,"Rea"],[30,28,7,26],[30,29,7,26,"default"],[30,36,7,26],[30,37,7,27,"useSharedValue"],[30,51,7,41],[30,52,7,42],[30,56,7,46],[30,57,7,47],[31,4,8,2],[31,10,8,8,"lastTimestamp"],[31,23,8,21],[31,26,8,24,"Rea"],[31,29,8,27],[31,30,8,27,"default"],[31,37,8,27],[31,38,8,28,"useSharedValue"],[31,52,8,42],[31,53,8,43],[31,54,8,44],[31,55,8,45],[31,56,8,46],[32,4,9,2],[32,10,9,8,"animatedImage"],[32,23,9,21],[32,26,9,24],[32,30,9,24,"useAnimatedImage"],[32,52,9,40],[32,53,9,40,"useAnimatedImage"],[32,69,9,40],[32,71,9,41,"source"],[32,77,9,47],[32,79,9,49,"err"],[32,82,9,52],[32,86,9,56],[33,6,10,4,"console"],[33,13,10,11],[33,14,10,12,"error"],[33,19,10,17],[33,20,10,18,"err"],[33,23,10,21],[33,24,10,22],[34,6,11,4],[34,12,11,10],[34,16,11,14,"Error"],[34,21,11,19],[34,22,11,20],[34,62,11,60,"err"],[34,65,11,63],[34,66,11,64,"message"],[34,73,11,71],[34,76,11,74],[34,77,11,75],[35,4,12,2],[35,5,12,3],[35,6,12,4],[36,4,13,2],[36,10,13,8,"frameDuration"],[36,23,13,21],[36,26,13,24],[36,27,13,25,"animatedImage"],[36,40,13,38],[36,45,13,43],[36,49,13,47],[36,53,13,51,"animatedImage"],[36,66,13,64],[36,71,13,69],[36,76,13,74],[36,77,13,75],[36,80,13,78],[36,85,13,83],[36,86,13,84],[36,89,13,87,"animatedImage"],[36,102,13,100],[36,103,13,101,"currentFrameDuration"],[36,123,13,121],[36,124,13,122],[36,125,13,123],[36,130,13,128,"DEFAULT_FRAME_DURATION"],[36,152,13,150],[37,4,14,2,"Rea"],[37,7,14,5],[37,8,14,5,"default"],[37,15,14,5],[37,16,14,6,"useFrameCallback"],[37,32,14,22],[37,33,14,23],[37,42,14,23,"shopify_useAnimatedImageValueJs1Factory"],[37,82,14,23],[38,6,14,23,"_worklet_8279287978886_init_data"],[38,38,14,23],[39,6,15,9,"animatedImage"],[39,19,15,22],[40,6,16,6,"currentFrame"],[40,18,16,18],[41,6,19,8,"isPaused"],[41,14,19,16],[42,6,19,26,"lastTimestamp"],[42,19,19,39],[43,6,28,18,"frameDuration"],[44,4,28,31],[45,6,28,31],[45,12,28,31,"_e"],[45,14,28,31],[45,22,28,31,"global"],[45,28,28,31],[45,29,28,31,"Error"],[45,34,28,31],[46,6,28,31],[46,12,28,31,"shopify_useAnimatedImageValueJs1"],[46,44,28,31],[46,56,28,31,"shopify_useAnimatedImageValueJs1"],[46,57,14,23,"frameInfo"],[46,66,14,32],[46,68,14,36],[47,8,15,4],[47,12,15,8],[47,13,15,9,"animatedImage"],[47,26,15,22],[47,28,15,24],[48,10,16,6,"currentFrame"],[48,22,16,18],[48,23,16,19,"value"],[48,28,16,24],[48,31,16,27],[48,35,16,31],[49,10,17,6],[50,8,18,4],[51,8,19,4],[51,12,19,8,"isPaused"],[51,20,19,16],[51,21,19,17,"value"],[51,26,19,22],[51,30,19,26,"lastTimestamp"],[51,43,19,39],[51,44,19,40,"value"],[51,49,19,45],[51,54,19,50],[51,55,19,51],[51,56,19,52],[51,58,19,54],[52,10,20,6],[53,8,21,4],[54,8,22,4],[54,14,22,10],[55,10,23,6,"timestamp"],[56,8,24,4],[56,9,24,5],[56,12,24,8,"frameInfo"],[56,21,24,17],[57,8,25,4],[57,14,25,10,"elapsed"],[57,21,25,17],[57,24,25,20,"timestamp"],[57,33,25,29],[57,36,25,32,"lastTimestamp"],[57,49,25,45],[57,50,25,46,"value"],[57,55,25,51],[59,8,27,4],[60,8,28,4],[60,12,28,8,"elapsed"],[60,19,28,15],[60,22,28,18,"frameDuration"],[60,35,28,31],[60,37,28,33],[61,10,29,6],[62,8,30,4],[64,8,32,4],[65,8,33,4,"animatedImage"],[65,21,33,17],[65,22,33,18,"decodeNextFrame"],[65,37,33,33],[65,38,33,34],[65,39,33,35],[66,8,34,4],[66,14,34,10,"oldFrame"],[66,22,34,18],[66,25,34,21,"currentFrame"],[66,37,34,33],[66,38,34,34,"value"],[66,43,34,39],[67,8,35,4,"currentFrame"],[67,20,35,16],[67,21,35,17,"value"],[67,26,35,22],[67,29,35,25,"animatedImage"],[67,42,35,38],[67,43,35,39,"getCurrentFrame"],[67,58,35,54],[67,59,35,55],[67,60,35,56],[68,8,36,4],[68,12,36,8,"oldFrame"],[68,20,36,16],[68,22,36,18],[69,10,37,6,"oldFrame"],[69,18,37,14],[69,19,37,15,"dispose"],[69,26,37,22],[69,27,37,23],[69,28,37,24],[70,8,38,4],[72,8,40,4],[73,8,41,4,"lastTimestamp"],[73,21,41,17],[73,22,41,18,"value"],[73,27,41,23],[73,30,41,26,"timestamp"],[73,39,41,35],[74,6,42,2],[74,7,42,3],[75,6,42,3,"shopify_useAnimatedImageValueJs1"],[75,38,42,3],[75,39,42,3,"__closure"],[75,48,42,3],[76,8,15,9,"animatedImage"],[76,21,15,22],[77,8,16,6,"currentFrame"],[77,20,16,18],[78,8,19,8,"isPaused"],[78,16,19,16],[79,8,19,26,"lastTimestamp"],[79,21,19,39],[80,8,28,18,"frameDuration"],[81,6,28,31],[82,6,28,31,"shopify_useAnimatedImageValueJs1"],[82,38,28,31],[82,39,28,31,"__workletHash"],[82,52,28,31],[83,6,28,31,"shopify_useAnimatedImageValueJs1"],[83,38,28,31],[83,39,28,31,"__pluginVersion"],[83,54,28,31],[84,6,28,31,"shopify_useAnimatedImageValueJs1"],[84,38,28,31],[84,39,28,31,"__initData"],[84,49,28,31],[84,52,28,31,"_worklet_8279287978886_init_data"],[84,84,28,31],[85,6,28,31,"shopify_useAnimatedImageValueJs1"],[85,38,28,31],[85,39,28,31,"__stackDetails"],[85,53,28,31],[85,56,28,31,"_e"],[85,58,28,31],[86,6,28,31],[86,13,28,31,"shopify_useAnimatedImageValueJs1"],[86,45,28,31],[87,4,28,31],[87,5,14,23],[88,6,14,23,"_worklet_8279287978886_init_data"],[88,38,14,23],[89,6,15,9,"animatedImage"],[89,19,15,22],[90,6,16,6,"currentFrame"],[90,18,16,18],[91,6,19,8,"isPaused"],[91,14,19,16],[92,6,19,26,"lastTimestamp"],[92,19,19,39],[93,6,28,18,"frameDuration"],[94,4,28,31],[94,6,42,3],[94,7,42,4],[95,4,43,2],[95,11,43,9,"currentFrame"],[95,23,43,21],[96,2,44,0],[96,3,44,1],[97,0,44,2],[97,3]],"functionMap":{"names":["<global>","useAnimatedImageValue","useAnimatedImage$argument_1","Rea.useFrameCallback$argument_0"],"mappings":"AAA;qCCG;iDCK;GDG;uBEE;GF4B;CDE"},"hasCjsExports":false},"type":"js/module"}]}