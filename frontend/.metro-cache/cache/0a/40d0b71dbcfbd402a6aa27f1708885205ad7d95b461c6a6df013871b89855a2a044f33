{"dependencies":[{"name":"./ascending.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"xtKL/S7sK97/7tdhDf+yd4WGPfU=","exportNames":["*"],"imports":1}},{"name":"./sort.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":40},"end":{"line":2,"column":59,"index":99}}],"key":"ro8tJYy4r/rYT4XbEZc7ooHI910=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return rank;\n    }\n  });\n  var _ascendingJs = require(_dependencyMap[0], \"./ascending.js\");\n  var ascending = _interopDefault(_ascendingJs);\n  var _sortJs = require(_dependencyMap[1], \"./sort.js\");\n  function rank(values, valueof = ascending.default) {\n    if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n    let V = Array.from(values);\n    const R = new Float64Array(V.length);\n    if (valueof.length !== 2) V = V.map(valueof), valueof = ascending.default;\n    const compareIndex = (i, j) => valueof(V[i], V[j]);\n    let k, r;\n    values = Uint32Array.from(V, (_, i) => i);\n    // Risky chaining due to Safari 14 https://github.com/d3/d3-array/issues/123\n    values.sort(valueof === ascending.default ? (i, j) => (0, _sortJs.ascendingDefined)(V[i], V[j]) : (0, _sortJs.compareDefined)(compareIndex));\n    values.forEach((j, i) => {\n      const c = compareIndex(j, k === undefined ? j : k);\n      if (c >= 0) {\n        if (k === undefined || c > 0) k = j, r = i;\n        R[j] = r;\n      } else {\n        R[j] = NaN;\n      }\n    });\n    return R;\n  }\n});","lineCount":42,"map":[[12,2,4,15,"Object"],[12,8,4,15],[12,9,4,15,"defineProperty"],[12,23,4,15],[12,24,4,15,"exports"],[12,31,4,15],[13,4,4,15,"enumerable"],[13,14,4,15],[14,4,4,15,"get"],[14,7,4,15],[14,18,4,15,"get"],[14,19,4,15],[15,6,4,15],[15,13,4,15,"rank"],[15,17,4,15],[16,4,4,15],[17,2,4,15],[18,2,1,0],[18,6,1,0,"_ascendingJs"],[18,18,1,0],[18,21,1,0,"require"],[18,28,1,0],[18,29,1,0,"_dependencyMap"],[18,43,1,0],[19,2,1,0],[19,6,1,0,"ascending"],[19,15,1,0],[19,18,1,0,"_interopDefault"],[19,33,1,0],[19,34,1,0,"_ascendingJs"],[19,46,1,0],[20,2,2,0],[20,6,2,0,"_sortJs"],[20,13,2,0],[20,16,2,0,"require"],[20,23,2,0],[20,24,2,0,"_dependencyMap"],[20,38,2,0],[21,2,4,15],[21,11,4,24,"rank"],[21,15,4,28,"rank"],[21,16,4,29,"values"],[21,22,4,35],[21,24,4,37,"valueof"],[21,31,4,44],[21,34,4,47,"ascending"],[21,43,4,56],[21,44,4,56,"default"],[21,51,4,56],[21,53,4,58],[22,4,5,2],[22,8,5,6],[22,15,5,13,"values"],[22,21,5,19],[22,22,5,20,"Symbol"],[22,28,5,26],[22,29,5,27,"iterator"],[22,37,5,35],[22,38,5,36],[22,43,5,41],[22,53,5,51],[22,55,5,53],[22,61,5,59],[22,65,5,63,"TypeError"],[22,74,5,72],[22,75,5,73],[22,99,5,97],[22,100,5,98],[23,4,6,2],[23,8,6,6,"V"],[23,9,6,7],[23,12,6,10,"Array"],[23,17,6,15],[23,18,6,16,"from"],[23,22,6,20],[23,23,6,21,"values"],[23,29,6,27],[23,30,6,28],[24,4,7,2],[24,10,7,8,"R"],[24,11,7,9],[24,14,7,12],[24,18,7,16,"Float64Array"],[24,30,7,28],[24,31,7,29,"V"],[24,32,7,30],[24,33,7,31,"length"],[24,39,7,37],[24,40,7,38],[25,4,8,2],[25,8,8,6,"valueof"],[25,15,8,13],[25,16,8,14,"length"],[25,22,8,20],[25,27,8,25],[25,28,8,26],[25,30,8,28,"V"],[25,31,8,29],[25,34,8,32,"V"],[25,35,8,33],[25,36,8,34,"map"],[25,39,8,37],[25,40,8,38,"valueof"],[25,47,8,45],[25,48,8,46],[25,50,8,48,"valueof"],[25,57,8,55],[25,60,8,58,"ascending"],[25,69,8,67],[25,70,8,67,"default"],[25,77,8,67],[26,4,9,2],[26,10,9,8,"compareIndex"],[26,22,9,20],[26,25,9,23,"compareIndex"],[26,26,9,24,"i"],[26,27,9,25],[26,29,9,27,"j"],[26,30,9,28],[26,35,9,33,"valueof"],[26,42,9,40],[26,43,9,41,"V"],[26,44,9,42],[26,45,9,43,"i"],[26,46,9,44],[26,47,9,45],[26,49,9,47,"V"],[26,50,9,48],[26,51,9,49,"j"],[26,52,9,50],[26,53,9,51],[26,54,9,52],[27,4,10,2],[27,8,10,6,"k"],[27,9,10,7],[27,11,10,9,"r"],[27,12,10,10],[28,4,11,2,"values"],[28,10,11,8],[28,13,11,11,"Uint32Array"],[28,24,11,22],[28,25,11,23,"from"],[28,29,11,27],[28,30,11,28,"V"],[28,31,11,29],[28,33,11,31],[28,34,11,32,"_"],[28,35,11,33],[28,37,11,35,"i"],[28,38,11,36],[28,43,11,41,"i"],[28,44,11,42],[28,45,11,43],[29,4,12,2],[30,4,13,2,"values"],[30,10,13,8],[30,11,13,9,"sort"],[30,15,13,13],[30,16,13,14,"valueof"],[30,23,13,21],[30,28,13,26,"ascending"],[30,37,13,35],[30,38,13,35,"default"],[30,45,13,35],[30,48,13,38],[30,49,13,39,"i"],[30,50,13,40],[30,52,13,42,"j"],[30,53,13,43],[30,58,13,48],[30,62,13,48,"ascendingDefined"],[30,69,13,64],[30,70,13,64,"ascendingDefined"],[30,86,13,64],[30,88,13,65,"V"],[30,89,13,66],[30,90,13,67,"i"],[30,91,13,68],[30,92,13,69],[30,94,13,71,"V"],[30,95,13,72],[30,96,13,73,"j"],[30,97,13,74],[30,98,13,75],[30,99,13,76],[30,102,13,79],[30,106,13,79,"compareDefined"],[30,113,13,93],[30,114,13,93,"compareDefined"],[30,128,13,93],[30,130,13,94,"compareIndex"],[30,142,13,106],[30,143,13,107],[30,144,13,108],[31,4,14,2,"values"],[31,10,14,8],[31,11,14,9,"forEach"],[31,18,14,16],[31,19,14,17],[31,20,14,18,"j"],[31,21,14,19],[31,23,14,21,"i"],[31,24,14,22],[31,29,14,27],[32,6,15,6],[32,12,15,12,"c"],[32,13,15,13],[32,16,15,16,"compareIndex"],[32,28,15,28],[32,29,15,29,"j"],[32,30,15,30],[32,32,15,32,"k"],[32,33,15,33],[32,38,15,38,"undefined"],[32,47,15,47],[32,50,15,50,"j"],[32,51,15,51],[32,54,15,54,"k"],[32,55,15,55],[32,56,15,56],[33,6,16,6],[33,10,16,10,"c"],[33,11,16,11],[33,15,16,15],[33,16,16,16],[33,18,16,18],[34,8,17,8],[34,12,17,12,"k"],[34,13,17,13],[34,18,17,18,"undefined"],[34,27,17,27],[34,31,17,31,"c"],[34,32,17,32],[34,35,17,35],[34,36,17,36],[34,38,17,38,"k"],[34,39,17,39],[34,42,17,42,"j"],[34,43,17,43],[34,45,17,45,"r"],[34,46,17,46],[34,49,17,49,"i"],[34,50,17,50],[35,8,18,8,"R"],[35,9,18,9],[35,10,18,10,"j"],[35,11,18,11],[35,12,18,12],[35,15,18,15,"r"],[35,16,18,16],[36,6,19,6],[36,7,19,7],[36,13,19,13],[37,8,20,8,"R"],[37,9,20,9],[37,10,20,10,"j"],[37,11,20,11],[37,12,20,12],[37,15,20,15,"NaN"],[37,18,20,18],[38,6,21,6],[39,4,22,4],[39,5,22,5],[39,6,22,6],[40,4,23,2],[40,11,23,9,"R"],[40,12,23,10],[41,2,24,0],[42,0,24,1],[42,3]],"functionMap":{"names":["<global>","rank","compareIndex","Uint32Array.from$argument_1","<anonymous>","values.forEach$argument_0"],"mappings":"AAA;eCG;uBCK,6BD;+BEE,WF;sCGE,sCH;iBIC;KJQ;CDE"},"hasCjsExports":false},"type":"js/module"}]}